\newlength{\len}% SECTION / SUBSECTION で書名等の引数の長さ計算用

\newcommand{\SECTION}[6]{%
  \def\mySecTitleORIG{#1}% 書名・詩集名（原）   { {Liederkreis }
  \def\mySecTitleTRAN{#2}% 書名・詩集名（訳）   { リーダークライス }
  \def\mySecYOMI{#3}%%%%%% %よみ              { りーだーくらいす }
  \def\mySecREFERENCE{#4}% 整理番号            { Op.24 }
  \def\mySecMiscORIG{#5}%% 監修者等(訳)        { ハインリッヒ・ハイネ }
  \def\mySecMiscTRAN{#6}%% 監修者等(原)、年情報 { Heinrich Heine }
  %
  \newpage%
  %
  % (注意) 以下は SUBSECTION と同じデザインだが、
  % 将来それぞれのデザイン変更等に対応するため再定義
  %
  \def\glueA{~ ~ \hfill}%
  \settowidth{\len}{\mySecTitleORIG\mySecREFERENCE}%
  \ifdim \len > .465\linewidth \def\glueA{\par\hfill}\fi%
  %
  \phantomsection%
  \section*{%
    \begin{tblr}[t]{ | X @{ ~ ~ ~ ~ ~ ~ } X | }%
      \hline\hline[2pt]%
      \mySecTitleORIG\glueA{\mbox{\small\mySecREFERENCE}} &%
      \mySecTitleTRAN \\%
      \hfill {\small\mySecMiscORIG} & {\small\mySecMiscTRAN} \\%
      \hline[2pt]\hline%
    \end{tblr}%
  }%
  \index{\mySecTitleORIG(\mySecYOMI)@\mySecTitleORIG(\mySecTitleTRAN)\mySecREFERENCE}%
  \index{\mySecYOMI(\mySecTitleORIG)@\mySecTitleTRAN(\mySecTitleORIG)\mySecREFERENCE}%
  \addcontentsline{toc}{section}%
  {%
    \parbox[b]{.465\textwidth}{\mySecTitleORIG ~ \mbox{\small(\mySecREFERENCE)} ~ \dotfill\hspace{1em}}%
    ~ ~ %
    \parbox[b]{.465\textwidth}{\mySecTitleTRAN ~ \dotfill\hspace{1em}}%
  }%
  \fancyhead[L]{\small\mySecTitleORIG}%
  \fancyhead[R]{\small\mySecTitleTRAN}%
  \bigskip%
}

\newcommand{\SUBSECTION}[8]{%
  \def\mySubSecTitleORIG{#1}%%%% 書名・詩名（原）
  \def\mySubSecTitleTRAN{#2}%%%% 書名・詩名（訳）
  \def\mySubSecYOMI{#3}%%%%%%%%% よみ
  \def\mySubSecREFERENCE{#4}%%%% 整理番号
  \def\mySubSecLyricistORIG{#5}% 作詞家情報（原）
  \def\mySubSecLyricistTRAN{#6}% 作詞家情報（訳）
  \def\mySubSecComposerORIG{#7}% 作曲家情報（原）
  \def\mySubSecComposerTRAN{#8}% 作曲家情報（訳）
  %
  \needspace{12\baselineskip}%
  \bigskip%
  %
% (注意) 以下は SECTION と同じデザインだが、
  % 将来それぞれのデザイン変更等に対応するため再定義
  %
  % 整理番号・原文・訳文側の関連項目のどちらか一方指定時 \par\hfill で改行・右寄せ
  \def\glueA{\hfill}%
  \settowidth{\len}{\mySubSecTitleORIG\mySubSecREFERENCE}%
  \ifdim \len > .465\linewidth \def\glueA{\par\hfill}\fi%
  %
  % \def\glueB{\hfill}%
  % \settowidth{\len}{\mySubSecLyricistORIG\mySubSecLyricistTRAN}%
  % \ifdim \len > .465\linewidth \def\glueB{\par\hfill} \fi%
  % %
  % \def\gluec{\hfill}%
  % \settowidth{\len}{\mySubSecComposerORIG\mySubSecComposerTRAN}%
  % \ifdim \len > .465\linewidth \def\glueC{\par\hfill} \fi%
  %
  \phantomsection%
  \subsection*{%
    \begin{tblr}[t]{ | X @{ ~ ~ ~ ~ ~ ~ } X | }%
      \hline[1.5pt]%
      \mySubSecTitleORIG\glueA{\small\mbox{\mySubSecREFERENCE}} &%
      \mySubSecTitleTRAN \\%
      \hfill {\small\mySubSecLyricistORIG} & {\small\mySubSecLyricistTRAN} \\%
      \hfill {\small\mySubSecComposerORIG} & {\small\mySubSecComposerTRAN} \\%
      \hline[1.5pt]%
    \end{tblr}%
  }%
  \bigskip% 作品コンテンツとタイトル部分を際立てる為
  %
  \index{\mySubSecTitleORIG(\mySubSecYOMI)@\mySubSecTitleORIG(\mySubSecTitleTRAN)\mySubSecREFERENCE}%
  \index{\mySubSecYOMI(\mySubSecTitleORIG)@\mySubSecTitleTRAN(\mySubSecTitleORIG)\mySubSecREFERENCE}%
  \addcontentsline{toc}{subsection}%
  {%
    \parbox[b]{.465\textwidth}{\mySubSecTitleORIG ~ \mbox{\small(\mySubSecREFERENCE)} ~ \dotfill}%
    ~ ~ %
    \parbox[b]{.465\textwidth}{\mySubSecTitleTRAN ~ \dotfill}%
  }%
}
% 次ページに跨る時のメッセージ制御
\DefTblrTemplate{contfoot-text}{normal}{\footnotesize 次ページに続く}%%%{Continued on next page}
\SetTblrTemplate{contfoot-text}{normal}
\DefTblrTemplate{conthead-text}{normal}{}%%%{(Continued)}
\SetTblrTemplate{conthead-text}{normal}

% 次ページに table: という表示を消す
\DefTblrTemplate{caption-tag}{normal}{}
\SetTblrTemplate{caption-tag}{normal}
\DefTblrTemplate{caption-sep}{normal}{}
\SetTblrTemplate{caption-sep}{normal}

\newenvironment{myTBLR}[1][]%
{%
  \needspace{4\baselineskip}%
  \bigskip%
  \begin{longtblr}%
    [ %
    caption   = {}   , %
    label     = none , %
    #1                 %
    ] %
    { %
      colspec = { X | @{ ~ ~ ~ ~ ~ } X }, % 等配分
    } %
    %
  }{\end{longtblr}%
  \bigskip%次の作品との距離はここで基本調整
  \bigskip%
}
